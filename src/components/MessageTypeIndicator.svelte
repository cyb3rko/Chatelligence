<script lang="ts">
import App from "../App.svelte";

    import { WhatsAppMessageType } from "../types/WhatsAppMessageType.enum";

    export let type: WhatsAppMessageType;

    let label = "unknown type";

    $: {
        label = getEmoji(type) + " " + Object.keys(WhatsAppMessageType)[Object.values(WhatsAppMessageType).indexOf(type)] ?? "âš ï¸ unknown type";
    }

    const getEmoji = (type: WhatsAppMessageType) => {
        switch (type) {
            case WhatsAppMessageType.Audio:
                return "ğŸ”Š";
            case WhatsAppMessageType.ContactCard:
                return "ğŸ“‡";
            case WhatsAppMessageType.Document:
                return "ğŸ“„";
            case WhatsAppMessageType.Gif:
                return "ğŸŒ ";
            case WhatsAppMessageType.Image:
                return "ğŸ“¸";
            case WhatsAppMessageType.Location:
                return "ğŸ“";
            case WhatsAppMessageType.Sticker:
                return "ğŸ—¯";
            case WhatsAppMessageType.Text:
                return "ğŸ–";
            case WhatsAppMessageType.Video:
                return "ğŸ“¼";
        
            default:
                return "â“";
        }
    }
</script>

<messagetypeindicator class={type}>
    {label}
</messagetypeindicator>

<style>
    messagetypeindicator {
        display: inline-block;

        padding: 4px;
        padding-right: 6px;
        border-radius: 4px;
        background-color: rgb(17, 16, 16);
    }

    /* TODO: fix */
    messagetypeindicator :global(.undefined) {
        background-color: aqua;
    }

    messagetypeindicator :global(.text) {
        background-color: lightgray;
    }
</style>
